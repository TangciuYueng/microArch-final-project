server:
  port: 8886  #启动端口
spring:
  cloud:
    gateway:
      locator:
        enabled: true
        lower-case-service-id: true
      globalcors:
        corsConfigurations:
          '[/**]':
            allowedHeaders: "*"
            allowedOrigins:
              - "http://localhost:8082"
              - "http://localhost:8881"
              - "http://localhost:8111"
              - "http://localhost:8887"
              - "http://localhost:8888"
              - "http://localhost:8889"
              - "http://localhost:*"
              - "http://120.26.0.232"
            allowedMethods:
              - GET
                POST
                DELETE
                PUT
                OPTION
      routes:
        - id: music-room-service
          uri: lb://music-room-service      # 按照注册在 nacos 上的服务名获取实例
          predicates:
            - Path=/music_room/**           # 匹配所有以 music_room 开头的路由
          filters:
            - StripPrefix=1                 # 转发的时候去掉 第一个 这里即 music_room

        - id: diary-writing-service
          uri: lb://diary-writing-service
          predicates:
            - Path=/diary/**
          filters:
            - StripPrefix=1

        - id: music-listen-service
          uri: lb://music-listen-service
          predicates:
            - Path=/music_listen/**
          filters:
            - StripPrefix=1

        - id: emotion-service
          uri: lb://emotion-service
          predicates:
            - Path=/api/emotion/**
          filters:
            - StripPrefix=1
    nacos:
      # 服务注册与发现
      discovery:
        server-addr: 120.26.0.232:8848  # nacos地址
        namespace: 2023                 # 命名空间ID
        group: dev                      # 群组名称（自己设定，将服务进行逻辑分组）
        username: nacos                 # 用户名
        password: microArch2023         # 密码
      # 拉取nacos配置中心文件
      # 若不确定要不要拉取，可以先注释掉下面到datasource前两个config下的内容
      # 注释了之后一定要把pom.xml里的spring-cloud-starter-alibaba-nacos-config依赖移除，否则会报错
#      config:
#        server-addr: 120.26.0.232:8848  # nacos地址
#        namespace: 2023                 # 命名空间ID
#        group: DEFAULT_GROUP            # 群组名称（自己设定，将服务进行逻辑分组）
#        username: nacos                 # 用户名
#        password: microArch2023         # 密码
#        name: login-service             # 文件名（缺省则是微服务的名字）
#        file-extension: yaml            # 文件后缀
#        context-path: /nacos
  application:
    name: gateway
